@model ToolTrack.Domain.Entities.Prestamo

@{
    ViewData["Title"] = "Editar Préstamo";
}

<h2 class="mb-4 fw-bold">Editar Préstamo</h2>

<form asp-action="Edit" class="p-4 bg-white rounded shadow-sm" style="max-width: 700px;">
    <input type="hidden" asp-for="IdPrestamo" />

    <div class="mb-3">
        <label class="form-label fw-bold">Herramienta</label>
        <input class="form-control" value="@Model.Herramienta?.Nombre" readonly />
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Trabajador</label>
        <input class="form-control" value="@Model.Trabajador?.Nombres" readonly />
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Fecha de Préstamo</label>
        <input class="form-control" value="@Model.FechaPrestamo.ToString("dd/MM/yyyy HH:mm")" readonly />
    </div>

    @if (Model.FechaDevolucion.HasValue)
    {
        <div class="mb-3">
            <label class="form-label fw-bold">Fecha de Devolución</label>
            <input class="form-control" value="@Model.FechaDevolucion.Value.ToString("dd/MM/yyyy HH:mm")" readonly />
        </div>
    }

    <div class="mb-3">
        <label class="form-label fw-bold">Estado</label>
        <input class="form-control" value="@Model.Estado" readonly />
    </div>

    <div class="mb-3">
        <label asp-for="Observacion" class="form-label fw-bold">Observación</label>
        <textarea asp-for="Observacion" class="form-control" rows="3"></textarea>
        <span asp-validation-for="Observacion" class="text-danger"></span>
    </div>

    @if (Model.Estado == "Activo")
    {
        <button type="submit" class="btn btn-primary fw-bold w-100">Marcar como Devuelto</button>
    }
    else
    {
        <div class="alert alert-success text-center">
            Este préstamo ya fue finalizado.
        </div>
    }
</form>

<div class="mt-3">
    <a asp-action="Index" class="btn btn-secondary">← Volver al listado</a>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
